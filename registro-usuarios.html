<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nes+ | Registro</title>
    <link rel="stylesheet" href="./css/output.css">
    <link rel="stylesheet" href="./css/styles.css">
    <!-- Estilos para carrusel -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
    <!-- Estilos de Datepicker -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <!-- Estilos para cortar la imagen -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.2/croppie.min.css'>

<body class="font-body mih-h-screen">

    <!-- Navbar -->
    <div class="z-40 min-w-full hidden">
        <div class="relative bg-white">
            <div class="px-6 mx-auto lg:px-8">
                <div
                    class="flex items-center justify-between py-5 border-gray-100 md:py-3 lg:justify-start lg:space-x-10">

                    <div>

                        <!-- Nes Logo -->
                        <div class=" mx-4 lg:mx-0">
                            <a href="index.html">
                                <img class="w-auto h-7" src="./img/NesLogo.svg" alt="Nes Logo">
                            </a>
                        </div>

                    </div>

                </div>
            </div>

        </div>
    </div>

    <section class="grid lg:grid-cols-12 grid-cols-4 sm:grid-cols-8 ">
        <!-- Form -->
        <div class="sm:col-span-8 col-span-4 py-6 flex items-center flex-col px-4 sm:px-0 min-h-screen relative order-2 lg:order-1">

            <!-- Foto de Perfil -->
            <div x-data="{'showModal': false, 'hiddenIcon': true}" x-cloak
                class="w-full flex flex-col items-center justify-center">
                <label class="text-xs font-semibold text-secondary-500 mb-1">Foto de perfil</label>
                <div
                    class="active:ring-primary-500 transition hover:ring-4 cursor-pointer relative flex h-24 w-24 shrink-0 items-center justify-center rounded-full bg-gray-100">
                    <!-- Contenedor donde se previsualizará la foto de perfil recortada -->
                    <div id="preview-crop-image" class="absolute rounded-full"></div>

                    <!-- SVG -->
                    <div class="absolute" x-show="hiddenIcon">
                        <div class="flex justify-center">
                            <svg class="h-1/2 w-1/2 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h1 1 14H20z">
                                </path>
                            </svg>
                        </div>
                    </div>


                    <!-- Input para subir foto de peril -->
                    <input @change="showModal = true" type="file" id="image" accept="image/png, image/jpeg"
                        class="w-full h-full opacity-0 hover:cursor-pointer" name="">
                </div>

                <!-- Botón para Eliminar imagen -->
                <div class="flex items-center justify-center">
                    <div class="hidden mt-2 text-center" id="btnBorrar">
                        <button id="btnDelete" class="btn bg-red-50 text-red-500 hover:bg-red-100 hover:text-red-600"
                            @click="hiddenIcon = true">Eliminar</button>
                    </div>
                </div>

                <!-- Modal para Recortar Imagen -->
                <div x-show="showModal" class="bg-black/75 wpx-18-full h-full absolute top-0 bottom-0 z-40">
                    <div class="w-full sm:h-full flex items-center sm:justify-center pt-24 sm:pt-0 px-3">
                        <div class="flex flex-col gap-2 rounded-md shadow-md bg-white text-gray-800 w-full sm:w-auto z-50">
                            <h4 class="text-xl font-semibold p-6">Recortar Imagen</h4>

                            <div class="w-full">
                                <div class="p-3">
                                    <!-- Contenedor donde aparecerá el Slider para recortar imagen -->
                                    <div>
                                        <div id="uploadImg"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-center gap-4 p-6">
                                <button @click="showModal = !showModal"
                                    class="btn w-1/2 text-gray-800 hover:text-gray-900 hover:bg-gray-200/80">Cancelar</button>
                                <div @click="showModal = !showModal; hiddenIcon = !hiddenIcon" class="w-1/2"
                                    id="btnCrop">
                                    <button id="btnUpload" class="btn-primary mt-4">Recortar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form Registro -->
            <div class="sm:w-96 w-full space-y-6">
                <!-- Form -->

                <!-- Contraseña -->
                <div class="w-full space-y-0.5">
                    <label for="form-password" class="text-xs font-semibold text-secondary-500">Contraseña</label>
                    <div class="relative" x-data="{ show: true }" x-cloak>
                        <div
                            class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2.5 text-gray-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                                    clip-rule="evenodd" />
                            </svg>
                        </div>
                        <input :type="show ? 'password' : 'text'" required id="form-password" type="password"
                            placeholder="Ingresar una Contraseña" class="input pl-10">
                        <div
                            class="absolute inset-y-0 right-0 flex items-center justify-center pr-4 text-sm leading-5 cursor-pointer">
                            <svg @click="show = !show" :class="{'hidden': !show, 'block':show }"
                                xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 p-px text-slate-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <svg @click="show = !show" :class="{'block': !show, 'hidden':show }"
                                xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 p-px text-slate-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                            </svg>
                        </div>
                    </div>
                    <!-- Texto de Error -->
                    <p class="pt-1 text-xs font-medium text-red-600 hidden">Introduce una contraseña de al menos
                        8 dígitos. | Introduce una contraseña.</p>
                </div>

                <!-- Repetir Contraseña -->
                <div class="w-full space-y-0.5">
                    <label for="form-repeat-password" class="text-xs font-semibold text-secondary-500">Repetir
                        Contraseña</label>
                    <div class="relative" x-data="{ show: true }" x-cloak>
                        <div
                            class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2.5 text-gray-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                                    clip-rule="evenodd" />
                            </svg>
                        </div>
                        <input :type="show ? 'password' : 'text'" required id="form-repeat-password" type="password"
                            placeholder="Repetir Contraseña" class="input pl-10">
                        <div
                            class="absolute inset-y-0 right-0 flex items-center justify-center pr-4 text-sm leading-5 cursor-pointer">
                            <svg @click="show = !show" :class="{'hidden': !show, 'block':show }"
                                xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 p-px text-slate-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <svg @click="show = !show" :class="{'block': !show, 'hidden':show }"
                                xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 p-px text-slate-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                            </svg>
                        </div>
                    </div>
                    <!-- Texto de Error -->
                    <p class="pt-1 text-xs font-medium text-red-600 hidden">Las contraseñas no coinciden.</p>
                </div>

                <div class="lg:flex lg:space-x-4 space-y-4 lg:space-y-0">
                    <div class="w-full space-y-0.5">
                        <label for="form-gender" class="text-xs font-semibold text-secondary-500">Género</label>
                        <select id="form-gender" class="input">
                            <option selected value="0" disabled>Elegir Género</option>
                            <option value="1">Hombre</option>
                            <option value="2">Mujer</option>
                            <option value="3">Transexual</option>
                            <option value="4">No binario</option>
                            <option value="5">Otro</option>
                        </select>
                        <!-- Texto de Error -->
                        <p class="pt-1 text-xs font-medium text-red-600 hidden">Selecciona un Género.</p>
                    </div>

                    <div class="w-full space-y-0.5">
                        <label for="form-orientation"
                            class="text-xs font-semibold text-secondary-500">Orientación</label>
                        <select id="form-orientation" class="input">
                            <option disabled selected value> Elegir Orientación </option>
                            <option value="1">Heterosexual</option>
                            <option value="2">Lesbiana</option>
                            <option value="3">Gay</option>
                            <option value="4">Bisexual</option>
                            <option value="5">Otro</option>
                        </select>
                        <!-- Texto de Error -->
                        <p class="pt-1 text-xs font-medium text-red-600 hidden">Selecciona una Orientación.</p>
                    </div>
                </div>

                <div class="lg:flex lg:space-x-4 space-y-4 lg:space-y-0">
                    <div class="w-full space-y-0.5">
                        <label for="form-status" class="text-xs font-semibold text-secondary-500">Estado
                            Civil</label>
                        <select id="form-status" class="input">
                            <option disabled selected value> Elegir Estado Civil </option>
                            <option value="1">Soltero</option>
                            <option value="2">En relación</option>
                            <option value="3">Casado</option>
                            <option value="4">Viudo</option>
                            <option value="5">Es complicado</option>
                        </select>
                        <!-- Texto de Error -->
                        <p class="pt-1 text-xs font-medium text-red-600 hidden">Selecciona un Estado.</p>
                    </div>

                    <div class="w-full space-y-0.5">
                        <label for="form-date" class="text-xs font-semibold text-secondary-500">Fecha de
                            Nacimiento</label>
                        <input type="text" name="datetimes" placeholder="10/24/1984" class="input" />
                        <!-- Texto de Error -->
                        <p class="pt-1 text-xs font-medium text-red-600 hidden">Debes de tener al menos 18 años
                            para poder continuar.</p>
                    </div>
                </div>

                <!-- Terminos y condiciones -->
                <div class="">
                    <div class="flex items-start justify-between mt-6">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded text-primary-500" />
                        </label>
                        <p class="block ml-2 font-medium text-gray-400 text-xtin">Para continuar debes aceptar los
                            <a href="./condiciones-de-uso.html" target="_blank"
                                class="underline text-primary-500">términos de uso</a>
                            y la
                            <a href="./politica-de-privacidad.html" target="_blank"
                                class="underline text-primary-500">política
                                de privacidad</a> de Nes+. Además el usuario/a declara que es
                            mayor de edad al momento de registrarse en función a la ley
                            aplicable.
                        </p>
                    </div>
                    <!-- Texto de Error -->
                    <p class="pt-2 text-xs font-medium text-red-600 hidden">Debes de aceptar para continuar.</p>
                </div>

                <div class="space-y-4 text-center">
                    <!-- Boton de Ingresar -->
                    <div class="flex justify-center">
                        <button x-data @click.window="window.scrollTo({top: 0, behavior: 'smooth'})" type="button"
                            class="btn-primary mt-4" @click.prevent="step = 2">Ingresar</button>
                    </div>


                </div>
            </div>

        </div>

        <!-- Texto -->
        <div class="lg:col-span-4 sm:col-span-8 col-span-4 lg:min-h-screen py-14 lg:py-0 flex items-center justify-center w-full bg-white lg:bg-gray-100 order-1 lg:order-2">
            <div class="flex flex-col items-center justify-center space-y-6 w-full ">
                <!-- Logo -->
                <div class="h-12 w-12">
                    <img src="./img/NesLogoResponsive.svg" class="w-full h-full" alt="Nes Logo Registro">
                </div>
                <!-- Text Block -->
                <div class="text-center space-y-2 px-4">
                    <h1 class="sm:text-2xl font-bold text-secondary-500">¡Bienvenido a la nueva Red Social de Nes+!</h1>
                    <p class="font-medium text-gray-500 text-sm">Porque nos estamos mudando, te pedimos que
                        actualices algunos de tus datos, esto solo tomará un momento.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Scripts de terceros -->
    <script src="//unpkg.com/alpinejs" defer></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.2/croppie.js'></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

    <!-- Scripts de la página -->
    <script>
        // Función para autoplay de carousel
        var swiper = new Swiper(".mySwiper", {
            spaceBetween: 30,
            effect: "fade",
            loop: true,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            }
        });
    </script>

    <script>
        // Función para cortar la imagen de Crear Evento
        let resize = $('#uploadImg').croppie({
            enableExif: true,
            enableOrientation: true,
            viewport: {
                width: 150,
                height: 150,
                type: 'circle'
            },
            boundary: {
                width: 250,
                height: 250
            }
        });

        // Inicio de Subir imagen en Crear Eventos

        // Función de cambio para renderizar la imagen
        $('#image').on('change', function () {
            var reader = new FileReader();
            reader.onload = function (e) {
                resize.croppie('bind', {
                    url: e.target.result
                }).then(function () {
                });
            }
            reader.readAsDataURL(this.files[0]);
        });

        // Boton para subir la imagen
        $('#btnUpload').on('click', function (ev) {
            resize.croppie('result', {
                type: 'canvas',
                size: 'original',
                quality: 1
            }).then(function (img) {
                // $.ajax({
                //   url: "image-crop.php",
                //   type: "POST",
                //   data: {"image":img},
                //   success: function (data) {
                //     html = '<img src="' + img + '" />';
                //     $("#preview-crop-image").html(html);
                //   }
                // });
                html = '<img id="imagePreview" class="w-full h-full rounded-full" src="' + img + '" />';
                $("#preview-crop-image").html(html);
            });

            document.getElementById('btnBorrar').classList.remove('hidden');
        });

        // Boton de Borrar
        $('#btnDelete').on('click', function (ev) {
            let image = document.getElementById('imagePreview');
            image.parentNode.removeChild(image);
            document.getElementById('btnBorrar').classList.add('hidden');
        });

        // Función para iniciar DatePicker
        $(function () {
            $('input[name="datetimes"]').daterangepicker({
                singleDatePicker: true,
                showDropdowns: true,
                minYear: 1901,
                maxYear: parseInt(moment().format('YYYY'), 10)
            });
        });
    </script>

</body>

</html>